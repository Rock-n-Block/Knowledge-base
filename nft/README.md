# NFT

- [Простое объяснение](#%D0%BF%D1%80%D0%BE%D1%81%D1%82%D0%BE%D0%B5-%D0%BE%D0%B1%D1%8A%D1%8F%D1%81%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5)
- [Что такое смарт-контракты](#%D1%87%D1%82%D0%BE-%D1%82%D0%B0%D0%BA%D0%BE%D0%B5-%D1%81%D0%BC%D0%B0%D1%80%D1%82-%D0%BA%D0%BE%D0%BD%D1%82%D1%80%D0%B0%D0%BA%D1%82%D1%8B)
- [Основные методы смарт-контракта NFT](#%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5-%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%D1%8B-%D1%81%D0%BC%D0%B0%D1%80%D1%82-%D0%BA%D0%BE%D0%BD%D1%82%D1%80%D0%B0%D0%BA%D1%82%D0%B0-nft)
- [Что хранится внутри NFT и зачем?](#%D1%87%D1%82%D0%BE-%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D1%82%D1%81%D1%8F-%D0%B2%D0%BD%D1%83%D1%82%D1%80%D0%B8-nft-%D0%B8-%D0%B7%D0%B0%D1%87%D0%B5%D0%BC)
- [Пробуем на практике](#%D0%BF%D1%80%D0%BE%D0%B1%D1%83%D0%B5%D0%BC-%D0%BD%D0%B0-%D0%BF%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D0%BA%D0%B5)
- [Аукционы](#аукционы)
- [OpenSea](#opensea)
- [Metaplex](metaplex.md)

**Non-fungible token (NFT)** - это уникальный токен, который может принадлежать только одному 
владельцу и может передаваться другим участникам сети только с его согласия. 

Именно это используется как способ продавать цифровое искусство на всяких биржах, например, [Rarible](https://rarible.com/).

Для просмотра содержимого токена нужно воспользоваться ресурсами, созданными для этого, например, 
[opensea.io](opensea.io). 

## Простое объяснение

Фактически, NFT это запись в одном из смарт-контрактов, что, например, 3-я запись принадлежит адресу `0xabcdef...`, а 
так же, что 3-ей записи соответствует строковое значение вроде `https://www.youtube.com/watch?v=dQw4w9WgXcQ`.

Посмотрите этот [пример на opensea.io](https://opensea.io/assets/0x1d963688fe2209a98db35c67a041524822cf04ff/391): 
`https://opensea.io/assets/0x1d963688fe2209a98db35c67a041524822cf04ff/391`, как видно из адреса, в смарт-контракте, 
который задеплоен по адресу `0x1d963688fe2209a98db35c67a041524822cf04ff` NFT хранится под индексом `391`.

Там же можно [перейти на etherscan](https://etherscan.io/address/0x1d963688fe2209a98db35c67a041524822cf04ff#readContract) 
и попробовать методы этого смарт-контракта, например, `tokenURI` вернёт значение для `391`-го токена: 
`https://ws.marble.cards/marble/token/394`, а `ownerOf` для этого же индекса вернёт адрес владельца 
`0x4E6201F8036f013655394f58b146c537acCc4728`. Об этом -- ниже.

## Что такое смарт-контракты

Для дальнейшего понимания, следует объяснить, что такое смарт-контракты. Фактически, это облачные программы, 
написанные на специальном языке и размещенные в сети Ethereum. После компилляции и деплоя смарт-контракт нельзя изменить,
а хранимые им данные навсегда размещены в сети.

У смарт-контрактов есть методы, в которые можно передавать параметры и изменять хранимые в сети данные. Write-методы 
требуют комиссии за изменение и любые операции над данными. Read-методы бесплатны.

NFT-токены, фактически являются просто записью в одном из смарт-контрактов. Причем для каждого вида NFT
пишется отдельный смарт-контракт, так что каждый токен не деплоится как отдельная сущность в сети, а просто
является записью внутри смарт-контракта.

## Основные методы смарт-контракта NFT

У смарт-контракта есть метод `mint`, который позволяет создателю смарт-контракта (и выбранным им лицам) создавать новые 
индексы и соответствующие им значения владельцев и строковые значения.

Так же у смарт-контракта есть метод `transfer`, который позволяет текущему владельцу изменить значение владельца
у одного из своих токенов на любой другой адрес, после чего прежний владелец потеряет возможность распоряжаться
токеном.

Метод `approve` может вызываться владельцем с указанием определенного адреса, после чего третья сторона может вызвать
метод `transfer` с указанием этого адреса, и токен будет перечислен.

Метод `burn` устанавливает токену владельца `0x00`, после чего он больше не может передаваться и считываться, то есть,
уничтожается.

Все методы описаны в документации к стандарту [ERC721](http://erc721.org/)

## Что хранится внутри NFT и зачем?

Технология NFT потенциально позволяет токенизировать, то есть перевести в блокчейн, любой товар, -
будь то цифровой (изображение, фото, видео, объекты цифрового искусства, виртуальные предметы и т.д.), 
или даже физический (коллекционные предметы, сувенирная продукция, в уникальнейших случаях — недвижимость).

Как сказано выше, хранение информации в сети Ethereum стоит денег. Поэтому обычно внутри NFT не хранится сам 
jpeg/mp4/mp3, а только ссылка на него.

Тут же возникает проблема, как сделать так, чтобы данные были доступны как можно дольше? Для этого обычно используют
распределенную файловую систему [ipfs](http://ipfs.io/).

Так что, я могу просто сохранить картинку, которая принадлежит кому-то, и он зря заплатил за владение ею? Да.

## Пробуем на практике

Для лучшего закрепления информации, можно:

- Выбрать любой NFT на платформе вроде opensea.io, 
- Узнать адрес контракта этого NFT, например, для https://opensea.io/assets/0x1d963688fe2209a98db35c67a041524822cf04ff/391 
это будет `0x1d963688fe2209a98db35c67a041524822cf04ff`
- Открыть этот контракт на etherscan.io, например, https://etherscan.io/address/0x1d963688fe2209a98db35c67a041524822cf04ff
- Во вкладке `readContract` вам будут доступны все методы на чтение

Так же можно создать и задеплоить контракт самому, используя онлайн-IDE, поминтить токены и передавать их на другие
адреса, подробнее -- в 
[этом туториале](https://forum.openzeppelin.com/t/create-an-nft-and-deploy-to-a-public-testnet-using-remix/6358).

## Аукционы

Механизм создания аукциона довольно прост. Для начала необходимо выбрать уникальную цифровую работу и загрузить её на
любую NFT-платформу (служащую для генерации NFT-токенов, их продажи, торгов, создания коллекций работ), после чего
добавить описание работы, минимальную цену продажи и отправить её в лист продаж.
подробнее -- в [в туториале foundation](https://help.foundation.app/en/articles/4742888-a-complete-guide-to-listing-an-nft-for-auction).

После выполнения всех действий, NFT появится в листе продаж, и когда аукцион начнется, NFT будет храниться 
на депонировании в рамках смарт-контракта маркетплейса до тех пор, пока аукцион не завершится или не будет
отменен.

Стоит отметить, что каждая операция в сети blockchain стоит денег: привязка токена (mint), трансфер,
выставление работы на торги (list), изменение цены или снятие с торгов.

Существует две возможные технические реализации NFT-маркетплейса:
  - на стороне бэкэнда — при таком подходе всевозможные денежные операции берет на себя владелец платформы. 
    Плюсом данной реализации можно назвать установку своей 'посреднической' комиссии, минимальную сумму продажи 
    NFT-токенов, резервной суммы при создании аукционов;
  - с помощью смарт-контрактов — каждая сторона (биддер, закрывающий аукцион) платят комиссию (gas) за любые
    операции в сети blockchain. Плюсом же данного подхода может быть низкий порог вхождения, потенциальное 
    привлечение большего количества пользователей и денежного оборота.

## OpenSea

Продать и приобрести NFT-объекты можно на блокчейн-платформах. Часть работают как маркетплейсы со множеством категорий,
а часть специализируются, к примеру, на искусстве или играх. Популярные сайты: OpenSea, Niftygateway и Rarible. Есть 
«закрытые» платформы, например, Async Art и SuperRare.

OpenSea (**opensea.io**) крупнейшая торговая онлайн-площадка для размещения цифровых предметов коллекционирования и
других редких электронных активов. Здесь можно приобрести и продать любые виды NFT-токенов.
Все активы здесь разделены на категории: Искусство, Доменные имена, Виртуальные миры, Торговые карточки, Коллекции, Спорт 
и Ютилити.

Если вы разработчик, OpenSea даёт вaм возможность создать собственную торговую площадку для активов ERC721 или ERC1155.

Метаданные активов позволяют OpenSea и подобным приложениям извлекать данные для цифровых активов.
Извлечь можно такие данные как имя, описание и изображение.

OpenSea поддерживает метаданные, которые структурированы в соответствии с официальным стандартом метаданных ERC721

<details>
 <summary>Пример метаданных для одного из существ в OpenSea</summary>
 <pre>
 {
  "description": "Friendly OpenSea Creature that enjoys long swims in the ocean.", 
  "external_url": "https://openseacreatures.io/3", 
  "image": "https://storage.googleapis.com/opensea-prod.appspot.com/puffs/3.png", 
  "name": "Dave Starbelly",
  "attributes": [ ... ], 
}
</pre>
</details>

<details>
 <summary>Пример метаданных, описывающих основные характеристики в стиле Enjin, </summary>
 <pre>
 {
    "properties": {
        "base": "starfish",
        "rich_property": {
            "name": "eyes",
            "value": "big",
            "display_value": "Big",
        }
                ...
    }
 }
</pre>
</details>

Подробнее про метаданные [в документации opensea](https://docs.opensea.io/docs/metadata-standards)
